<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Empire: Dawn of War - RPG</title>
    <style>
        :root {
            --gold: #ffd700;
            --dark-gold: #b8860b;
            --border-style: 3px solid var(--gold);
            --bg-panel: rgba(20, 20, 20, 0.95);
        }

        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; font-family: 'Georgia', serif; color: #eee; }

        /* –§–û–ù –ö–ê–†–¢–´ */
        #bg-map {
            position: fixed; inset: 0;
            background: url('map.png') no-repeat center center / cover;
            filter: brightness(0.3) blur(1px);
            z-index: 1;
        }

        /* 1. –ö–†–ê–°–ò–í–ê–Ø –ü–ê–ù–ï–õ–¨ –†–ï–°–£–†–°–û–í */
        #res-panel {
            position: fixed; top: 15px; right: 15px;
            background: var(--bg-panel);
            border: var(--border-style);
            box-shadow: 0 0 15px rgba(0,0,0,0.8), inset 0 0 10px rgba(255,215,0,0.2);
            padding: 10px; z-index: 100;
            display: grid; grid-template-columns: repeat(3, 80px); gap: 8px;
            border-radius: 4px;
        }
        .res-item {
            display: flex; flex-direction: column; align-items: center;
            background: rgba(255,255,255,0.05); border: 1px solid #444; padding: 5px;
        }
        .res-icon { font-size: 18px; margin-bottom: 2px; }
        .res-val { color: var(--gold); font-size: 12px; font-weight: bold; text-shadow: 1px 1px #000; }

        /* 2. –†–ê–ú–ö–ê –ö–ê–Ø (–ü–û–†–¢–†–ï–¢) */
        #kai-frame {
            position: fixed; top: 15px; left: 15px; z-index: 100;
            width: 100px; height: 130px;
            background: var(--bg-panel); border: var(--border-style);
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            display: flex; flex-direction: column; overflow: hidden;
        }
        .kai-img {
            width: 100%; height: 100px;
            background: url('marshal_blank.png') no-repeat top center / cover;
            border-bottom: 2px solid var(--gold);
        }
        .kai-hp-container { padding: 4px; background: #000; height: 30px; }
        .hp-bar { width: 100%; height: 8px; background: #300; border: 1px solid #600; border-radius: 2px; }
        #hp-fill { width: 100%; height: 100%; background: linear-gradient(90deg, #800, #f00); transition: 0.5s; }
        .kai-label { font-size: 9px; text-align: center; color: var(--gold); text-transform: uppercase; margin-top: 2px; }

        /* 3. –ö–†–ê–°–ò–í–û–ï –û–ö–ù–û –î–ò–ê–õ–û–ì–ê */
        #dialog-container {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: 95%; max-width: 700px; height: 180px;
            z-index: 200; display: flex;
        }
        
        /* –ú–∏–Ω–∏-—Ä–∞–º–∫–∞ –¥–ª—è —Ç–æ–≥–æ, –∫—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç */
        .speaker-frame {
            width: 120px; height: 100%; background: var(--bg-panel);
            border: var(--border-style); border-right: none;
            display: flex; align-items: center; justify-content: center;
        }
        .speaker-img { width: 90%; height: 90%; background: rgba(255,255,255,0.1); border: 1px solid #444; object-fit: cover; }

        /* –°–∞–º–æ –ø–æ–ª–µ —Ç–µ–∫—Å—Ç–∞ */
        .text-frame {
            flex: 1; background: var(--bg-panel);
            border: var(--border-style); padding: 20px;
            position: relative; box-shadow: inset 0 0 30px rgba(0,0,0,0.5);
        }
        .speaker-name { color: var(--gold); font-weight: bold; font-size: 18px; margin-bottom: 10px; border-bottom: 1px solid var(--dark-gold); display: inline-block; }
        .dialog-text { font-size: 15px; line-height: 1.5; color: #ddd; font-style: italic; }

        /* –ö–ù–û–ü–ö–ò –í–´–ë–û–†–ê */
        .choice-box {
            position: absolute; right: -5px; top: -110px;
            display: flex; flex-direction: column; gap: 8px; width: 300px;
        }
        .btn-choice {
            background: rgba(30, 0, 0, 0.9); border: 2px solid var(--gold);
            color: #fff; padding: 10px 15px; cursor: pointer; text-align: left;
            font-size: 13px; transition: 0.3s;
        }
        .btn-choice:hover { background: var(--dark-gold); color: #000; transform: scale(1.02); }
    </style>
</head>
<body>

    <div id="bg-map"></div>

    <div id="res-panel">
        <div class="res-item"><span class="res-icon">üçû</span><span class="res-val" id="res-bread">100</span></div>
        <div class="res-item"><span class="res-icon">ü™µ</span><span class="res-val" id="res-wood">50</span></div>
        <div class="res-item"><span class="res-icon">ü™®</span><span class="res-val" id="res-stone">20</span></div>
        <div class="res-item"><span class="res-icon">‚õìÔ∏è</span><span class="res-val" id="res-iron">0</span></div>
        <div class="res-item"><span class="res-icon">ü™ô</span><span class="res-val" id="res-silver">500</span></div>
        <div class="res-item"><span class="res-icon">üèÜ</span><span class="res-val" id="res-gold">0</span></div>
    </div>

    <div id="kai-frame">
        <div class="kai-img"></div>
        <div class="kai-hp-container">
            <div class="hp-bar"><div id="hp-fill"></div></div>
            <div class="kai-label">–ú–ê–†–®–ê–õ –ö–ê–ô</div>
        </div>
    </div>

    <div id="dialog-container">
        <div class="speaker-frame">
            <img src="marshal_blank.png" class="speaker-img" id="speaker-portrait">
        </div>
        <div class="text-frame">
            <div class="speaker-name" id="speaker-name">–ú–ê–†–®–ê–õ –ö–ê–ô</div>
            <div class="dialog-text" id="dialog-content">
                –ú–æ–π –ª–æ—Ä–¥, –≤–ø–µ—Ä–µ–¥–∏ –∑–∞–±—Ä–æ—à–µ–Ω–Ω—ã–π –º–æ—Å—Ç. –†–∞–∑–≤–µ–¥—á–∏–∫–∏ –¥–æ–∫–ª–∞–¥—ã–≤–∞—é—Ç –æ –¥–≤–∏–∂–µ–Ω–∏–∏ –≤ —Ç–µ–Ω—è—Ö. –ü—Ä–∏–∫–∞–∂–µ—Ç–µ —Ä–∏—Å–∫–Ω—É—Ç—å –∏–ª–∏ –ø–æ–∏—â–µ–º –¥—Ä—É–≥–æ–π –ø—É—Ç—å?
            </div>

            <div class="choice-box" id="choices">
                <button class="btn-choice" onclick="selectChoice(1)">1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞–∑–≤–µ–¥—á–∏–∫–æ–≤ –≤–±—Ä–æ–¥ (-20 –•–ª–µ–±–∞)</button>
                <button class="btn-choice" onclick="selectChoice(2)">2. –í–æ–∑–≥–ª–∞–≤–∏—Ç—å –∞—Ç–∞–∫—É (–†–∏—Å–∫ —Ä–∞–Ω–µ–Ω–∏—è)</button>
                <button class="btn-choice" onclick="selectChoice(3)">3. –†–∞–∑–æ–±—Ä–∞—Ç—å –º–æ—Å—Ç –Ω–∞ –¥–µ—Ä–µ–≤–æ</button>
            </div>
        </div>
    </div>

<script>
    let stats = { bread: 100, wood: 50, stone: 20, iron: 0, silver: 500, gold: 0, hp: 100 };

    function refreshUI() {
        document.getElementById('res-bread').innerText = stats.bread;
        document.getElementById('res-wood').innerText = stats.wood;
        document.getElementById('res-stone').innerText = stats.stone;
        document.getElementById('res-iron').innerText = stats.iron;
        document.getElementById('res-silver').innerText = stats.silver;
        document.getElementById('res-gold').innerText = stats.gold;
        document.getElementById('hp-fill').style.width = stats.hp + '%';

        if(stats.hp <= 0) {
            document.getElementById('dialog-content').innerText = "–ú–ê–†–®–ê–õ –ö–ê–ô –ü–ê–õ. –ë–ï–ó –ù–ï–ì–û –ê–†–ú–ò–Ø –ü–ï–†–ï–ë–ò–õ–ê –î–†–£–ì –î–†–£–ì–ê...";
            document.getElementById('choices').innerHTML = '<button class="btn-choice" onclick="location.reload()">–í–û–°–ö–†–ï–°–ò–¢–¨ (–ú–ê–ì–ò–Ø)</button>';
        }
    }

    function selectChoice(num) {
        const content = document.getElementById('dialog-content');
        const choiceBox = document.getElementById('choices');

        if(num === 1) {
            if(stats.bread >= 20) {
                stats.bread -= 20; stats.silver += 200;
                content.innerText = "–†–∞–∑–≤–µ–¥—á–∏–∫–∏ —É—Å–ø–µ—à–Ω–æ –æ–±–æ—à–ª–∏ –∑–∞—Å–∞–¥—É! –ú—ã –∑–∞—Ö–≤–∞—Ç–∏–ª–∏ –±—Ä–æ—à–µ–Ω–Ω–æ–µ —Å–µ—Ä–µ–±—Ä–æ.";
            }
        } else if(num === 2) {
            let wounded = Math.random() < 0.5;
            if(wounded) { stats.hp -= 35; content.innerText = "–ü–æ–±–µ–¥–∞! –ù–æ –ö–∞–π —Ç—è–∂–µ–ª–æ —Ä–∞–Ω–µ–Ω —Å—Ç—Ä–µ–ª–æ–π —Ä–∞–∑–±–æ–π–Ω–∏–∫–∞."; }
            else { content.innerText = "–ß–∏—Å—Ç–∞—è –ø–æ–±–µ–¥–∞! –í—Ä–∞–≥ –±–µ–∂–∞–ª, –±—Ä–æ—Å–∏–≤ –ø—Ä–∏–ø–∞—Å—ã."; }
            stats.silver += 300;
        } else if(num === 3) {
            stats.wood += 100;
            content.innerText = "–ú—ã —Ä–µ—à–∏–ª–∏ –Ω–µ —Ä–∏—Å–∫–æ–≤–∞—Ç—å –ª—é–¥—å–º–∏ –∏ —Ä–∞–∑–æ–±—Ä–∞–ª–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –º–æ—Å—Ç–∞ –Ω–∞ –¥—Ä–æ–≤–∞.";
        }

        choiceBox.innerHTML = '<button class="btn-choice" onclick="nextEvent()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —ç–∫—Å–ø–µ–¥–∏—Ü–∏—é...</button>';
        refreshUI();
    }

    function nextEvent() {
        alert("–ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–π –ª–æ–∫–∞—Ü–∏–∏...");
    }

    refreshUI();
</script>
</body>
</html>
