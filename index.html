<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Titan Arena - PvP –ë–∏—Ç–≤–∞</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background: linear-gradient(135deg, #0a0a1a 0%, #1a0a2a 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Segoe UI', system-ui, sans-serif;
            color: white;
            overflow: hidden;
        }
        
        #game-container {
            position: relative;
            width: 1000px;
            height: 700px;
            box-shadow: 0 0 80px rgba(0, 150, 255, 0.4);
            border-radius: 20px;
            overflow: hidden;
            border: 3px solid rgba(0, 200, 255, 0.3);
            background: #050510;
        }
        
        canvas {
            display: block;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–µ–Ω—é */
        .menu-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle at center, #0a1a2a 0%, #050510 70%);
            z-index: 100;
            padding: 40px;
        }
        
        .title {
            font-size: 72px;
            font-weight: 800;
            background: linear-gradient(45deg, #00ffff, #0080ff, #a000ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(0, 200, 255, 0.5);
            margin-bottom: 10px;
            letter-spacing: 2px;
        }
        
        .subtitle {
            font-size: 20px;
            color: #88ccff;
            margin-bottom: 60px;
            text-align: center;
            max-width: 600px;
            line-height: 1.5;
        }
        
        .menu-button {
            background: linear-gradient(45deg, #0066cc, #00aaff);
            border: none;
            color: white;
            padding: 20px 50px;
            font-size: 22px;
            border-radius: 50px;
            cursor: pointer;
            margin: 15px;
            min-width: 300px;
            text-align: center;
            font-weight: 600;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 100, 255, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .menu-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 150, 255, 0.5);
            background: linear-gradient(45deg, #0088ff, #00ccff);
        }
        
        .menu-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }
        
        .menu-button:hover::before {
            left: 100%;
        }
        
        .menu-button.vip {
            background: linear-gradient(45deg, #ffaa00, #ff5500);
            box-shadow: 0 10px 30px rgba(255, 100, 0, 0.3);
        }
        
        .menu-button.vip:hover {
            background: linear-gradient(45deg, #ffcc00, #ff7700);
            box-shadow: 0 15px 40px rgba(255, 150, 0, 0.5);
        }
        
        .player-info {
            position: absolute;
            top: 30px;
            left: 30px;
            background: rgba(0, 20, 40, 0.8);
            padding: 15px 25px;
            border-radius: 15px;
            border: 2px solid rgba(0, 150, 255, 0.3);
            min-width: 200px;
        }
        
        .player-name {
            font-size: 20px;
            color: #00ffff;
            font-weight: bold;
        }
        
        .player-stats {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }
        
        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #00ff88;
        }
        
        .stat-label {
            font-size: 12px;
            color: #88aacc;
        }
        
        .health-bar {
            width: 250px;
            height: 25px;
            background: rgba(255, 0, 0, 0.2);
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid rgba(255, 50, 50, 0.5);
            margin-top: 10px;
        }
        
        .health-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff0000, #ffff00, #00ff00);
            width: 100%;
            transition: width 0.3s ease;
        }
        
        .game-ui {
            position: absolute;
            bottom: 30px;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        
        .skill-button {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: 3px solid rgba(0, 200, 255, 0.5);
            background: rgba(0, 50, 100, 0.7);
            color: white;
            font-size: 30px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .skill-button:hover {
            transform: scale(1.1);
            background: rgba(0, 100, 200, 0.8);
            box-shadow: 0 0 20px rgba(0, 200, 255, 0.7);
        }
        
        .skill-button.cooldown {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .cooldown-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
        }
        
        .chat-box {
            position: absolute;
            bottom: 120px;
            left: 30px;
            width: 300px;
            height: 200px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 10px;
            padding: 15px;
            overflow-y: auto;
        }
        
        .chat-message {
            margin-bottom: 5px;
            padding: 5px 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
        }
        
        .game-over {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .victory-text {
            font-size: 80px;
            background: linear-gradient(45deg, #ffd700, #ffaa00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 30px;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
        }
        
        .defeat-text {
            font-size: 80px;
            background: linear-gradient(45deg, #ff0000, #aa0000);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 30px;
            text-shadow: 0 0 30px rgba(255, 0, 0, 0.5);
        }
    </style>
</head>
<body>
    <div id="game-container">
        <!-- –ú–µ–Ω—é –∏–≥—Ä—ã -->
        <div id="main-menu" class="menu-screen">
            <h1 class="title">TITAN ARENA</h1>
            <p class="subtitle">–°—Ç–∞–Ω—å –ª–µ–≥–µ–Ω–¥–æ–π –Ω–∞ –∫—Ä–æ–≤–∞–≤–æ–π –∞—Ä–µ–Ω–µ! –°—Ä–∞–∂–∞–π—Å—è —Å –∏–≥—Ä–æ–∫–∞–º–∏ —Å–æ –≤—Å–µ–≥–æ –º–∏—Ä–∞, —Ä–∞–∑–≤–∏–≤–∞–π –≥–µ—Ä–æ—è –∏ –¥–æ–∫–∞–∂–∏, —á—Ç–æ —Ç—ã –¥–æ—Å—Ç–æ–∏–Ω —Ç–∏—Ç—É–ª–∞ –ò–º–ø–µ—Ä–∞—Ç–æ—Ä–∞ –ê—Ä–µ–Ω—ã!</p>
            
            <button class="menu-button" id="play-button">‚ñ∂Ô∏è –ù–ê–ß–ê–¢–¨ –ë–ò–¢–í–£</button>
            <button class="menu-button" id="shop-button">üè™ –ú–ê–ì–ê–ó–ò–ù</button>
            <button class="menu-button" id="leaderboard-button">üèÜ –¢–û–ü –ò–ì–†–û–ö–û–í</button>
            <button class="menu-button vip" id="vip-button">üëë –ü–†–ï–ú–ò–£–ú –ü–û–î–ü–ò–°–ö–ê</button>
            <button class="menu-button" id="settings-button">‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò</button>
            
            <div style="margin-top: 50px; color: #88aacc; font-size: 14px;">
                –û–Ω–ª–∞–π–Ω –∏–≥—Ä–æ–∫–æ–≤: <span id="online-count">1,247</span> | –°–µ–∑–æ–Ω: 3 | –¢–≤–æ–π —Ä–µ–π—Ç–∏–Ω–≥: <span style="color: #00ff88;">#2,184</span>
            </div>
        </div>
        
        <!-- –ò–≥—Ä–æ–≤–æ–π UI -->
        <div id="game-ui" style="display: none;">
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–≥—Ä–æ–∫–∞ -->
            <div class="player-info">
                <div class="player-name">–¢–ò–¢–ê–ù_–°–õ–ê–í–´</div>
                <div class="player-stats">
                    <div class="stat">
                        <div class="stat-value">85</div>
                        <div class="stat-label">–£—Ä–æ–≤–µ–Ω—å</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">247</div>
                        <div class="stat-label">–ü–æ–±–µ–¥—ã</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">12.5–∫</div>
                        <div class="stat-label">–°–∏–ª–∞</div>
                    </div>
                </div>
                <div class="health-bar">
                    <div class="health-fill" id="player-health"></div>
                </div>
                <div style="color: #88aacc; margin-top: 5px;">HP: <span id="hp-text">100/100</span></div>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π -->
            <div class="game-ui">
                <div class="skill-button" data-skill="attack" title="–ê—Ç–∞–∫–∞">
                    ‚öîÔ∏è
                    <div class="cooldown-overlay" style="display: none;">3—Å</div>
                </div>
                <div class="skill-button" data-skill="fireball" title="–û–≥–Ω–µ–Ω–Ω—ã–π —à–∞—Ä">
                    üî•
                    <div class="cooldown-overlay" style="display: none;">8—Å</div>
                </div>
                <div class="skill-button" data-skill="shield" title="–ú–∞–≥–∏—á–µ—Å–∫–∏–π —â–∏—Ç">
                    üõ°Ô∏è
                    <div class="cooldown-overlay" style="display: none;">15—Å</div>
                </div>
                <div class="skill-button" data-skill="heal" title="–ò—Å—Ü–µ–ª–µ–Ω–∏–µ">
                    üíñ
                    <div class="cooldown-overlay" style="display: none;">20—Å</div>
                </div>
                <div class="skill-button" data-skill="teleport" title="–¢–µ–ª–µ–ø–æ—Ä—Ç">
                    ‚ú®
                    <div class="cooldown-overlay" style="display: none;">12—Å</div>
                </div>
                <div class="skill-button" data-skill="ultimate" title="–£–õ–¨–¢–ê: –ì–Ω–µ–≤ –¢–∏—Ç–∞–Ω–∞">
                    ‚≠ê
                    <div class="cooldown-overlay" style="display: none;">45—Å</div>
                </div>
            </div>
            
            <!-- –ß–∞—Ç -->
            <div class="chat-box">
                <div class="chat-message"><span style="color: #00ffff;">[–°–∏—Å—Ç–µ–º–∞]:</span> –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –ê—Ä–µ–Ω—É!</div>
                <div class="chat-message"><span style="color: #ffaa00;">–¢—ë–º–Ω—ã–π_–í–ª–∞—Å—Ç–µ–ª–∏–Ω:</span> –ö—Ç–æ —Å–ª–µ–¥—É—é—â–∏–π?</div>
                <div class="chat-message"><span style="color: #00ff88;">–õ–µ–¥—è–Ω–∞—è_–ö–æ—Ä–æ–ª–µ–≤–∞:</span> –ò—â—É –¥—É—ç–ª—å 1x1</div>
                <div class="chat-message"><span style="color: #ff5555;">–ö—Ä–æ–≤–∞–≤—ã–π_–í–æ–∏–Ω:</span> –¢–ò–¢–ê–ù_–°–õ–ê–í–´, –≤—ã–∑–æ–≤ –ø—Ä–∏–Ω—è—Ç!</div>
            </div>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω –ø–æ–±–µ–¥—ã -->
        <div id="victory-screen" class="game-over" style="display: none;">
            <div class="victory-text">–ü–û–ë–ï–î–ê!</div>
            <div style="font-size: 24px; margin-bottom: 30px; color: #88ddff;">–¢—ã —É–Ω–∏—á—Ç–æ–∂–∏–ª –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ –∑–∞ 2:45!</div>
            <div style="background: rgba(0, 100, 200, 0.3); padding: 20px; border-radius: 15px; margin-bottom: 30px;">
                <div style="color: #00ff88; font-size: 20px;">–ù–∞–≥—Ä–∞–¥—ã:</div>
                <div>+500 –∑–æ–ª–æ—Ç–∞</div>
                <div>+150 –æ–ø—ã—Ç–∞</div>
                <div>+1 –ö—Ä–∏—Å—Ç–∞–ª–ª –°–∏–ª—ã</div>
                <div>–¢–∏—Ç—É–ª: "–ù–µ–ø–æ–±–µ–¥–∏–º—ã–π"</div>
            </div>
            <button class="menu-button" id="next-fight">–°–õ–ï–î–£–Æ–©–ò–ô –ë–û–ô</button>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω –ø–æ—Ä–∞–∂–µ–Ω–∏—è -->
        <div id="defeat-screen" class="game-over" style="display: none;">
            <div class="defeat-text">–ü–û–†–ê–ñ–ï–ù–ò–ï</div>
            <div style="font-size: 24px; margin-bottom: 30px; color: #ff8888;">–ö—Ä–æ–≤–∞–≤—ã–π_–í–æ–∏–Ω –ø–æ–±–µ–¥–∏–ª —Ç–µ–±—è...</div>
            <div style="background: rgba(200, 0, 0, 0.3); padding: 20px; border-radius: 15px; margin-bottom: 30px;">
                <div style="color: #ff5555; font-size: 20px;">–ü–æ—Ç–µ—Ä–∏:</div>
                <div>-200 –∑–æ–ª–æ—Ç–∞</div>
                <div>–†–µ–π—Ç–∏–Ω–≥: -25</div>
                <div>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ: 5 –º–∏–Ω—É—Ç</div>
            </div>
            <button class="menu-button" id="rematch">–ú–°–¢–ò–¢–¨! (20 –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤)</button>
            <button class="menu-button" style="margin-top: 15px;" id="back-to-menu">–í –ú–ï–ù–Æ</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let game;
        let player;
        let currentScene = 'menu';
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            initGame();
            setupEventListeners();
            updateOnlineCount();
        };
        
        function initGame() {
            const config = {
                type: Phaser.AUTO,
                width: 1000,
                height: 700,
                parent: 'game-container',
                physics: {
                    default: 'arcade',
                    arcade: {
                        gravity: { y: 300 },
                        debug: false
                    }
                },
                scene: {
                    preload: preload,
                    create: create,
                    update: update
                }
            };
            
            game = new Phaser.Game(config);
        }
        
        function preload() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –∞—Å—Å–µ—Ç—ã
            this.load.image('bg', 'https://labs.phaser.io/assets/skies/space3.png');
            this.load.image('platform', 'https://labs.phaser.io/assets/sprites/platform.png');
            this.load.spritesheet('dude', 
                'https://labs.phaser.io/assets/sprites/dude.png',
                { frameWidth: 32, frameHeight: 48 }
            );
            this.load.spritesheet('enemy',
                'https://labs.phaser.io/assets/sprites/baddie.png',
                { frameWidth: 32, frameHeight: 32 }
            );
        }
        
        function create() {
            // –°–æ–∑–¥–∞–µ–º —Ñ–æ–Ω
            this.add.image(500, 350, 'bg');
            
            // –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã
            this.platforms = this.physics.add.staticGroup();
            this.platforms.create(500, 650, 'platform').setScale(2, 1).refreshBody();
            this.platforms.create(200, 500, 'platform');
            this.platforms.create(800, 500, 'platform');
            this.platforms.create(500, 350, 'platform');
            
            // –ò–≥—Ä–æ–∫
            player = this.physics.add.sprite(200, 450, 'dude');
            player.setBounce(0.2);
            player.setCollideWorldBounds(true);
            player.body.setGravityY(300);
            
            // –ê–Ω–∏–º–∞—Ü–∏–∏
            this.anims.create({
                key: 'left',
                frames: this.anims.generateFrameNumbers('dude', { start: 0, end: 3 }),
                frameRate: 10,
                repeat: -1
            });
            
            this.anims.create({
                key: 'turn',
                frames: [ { key: 'dude', frame: 4 } ],
                frameRate: 20
            });
            
            this.anims.create({
                key: 'right',
                frames: this.anims.generateFrameNumbers('dude', { start: 5, end: 8 }),
                frameRate: 10,
                repeat: -1
            });
            
            // –í—Ä–∞–≥
            let enemy = this.physics.add.sprite(800, 450, 'enemy');
            enemy.setCollideWorldBounds(true);
            enemy.body.setGravityY(300);
            
            // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è
            this.physics.add.collider(player, this.platforms);
            this.physics.add.collider(enemy, this.platforms);
            
            // –ö–∞–º–µ—Ä–∞
            this.cameras.main.startFollow(player);
            
            // –°–∫—Ä—ã–≤–∞–µ–º Phaser-–∫–∞–Ω–≤–∞—Å –ø–æ–∫–∞ –Ω–µ –Ω–∞–∂–∞—Ç–∞ –∏–≥—Ä–∞
            this.sys.canvas.style.display = 'none';
        }
        
        function update() {
            if (currentScene !== 'game') return;
            
            const cursors = this.input.keyboard.createCursorKeys();
            
            if (cursors.left.isDown) {
                player.setVelocityX(-160);
                player.anims.play('left', true);
            } else if (cursors.right.isDown) {
                player.setVelocityX(160);
                player.anims.play('right', true);
            } else {
                player.setVelocityX(0);
                player.anims.play('turn');
            }
            
            if (cursors.up.isDown && player.body.touching.down) {
                player.setVelocityY(-330);
            }
        }
        
        function setupEventListeners() {
            // –ö–Ω–æ–ø–∫–∞ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã
            document.getElementById('play-button').addEventListener('click', function() {
                document.getElementById('main-menu').style.display = 'none';
                document.getElementById('game-ui').style.display = 'block';
                game.scene.scenes[0].sys.canvas.style.display = 'block';
                currentScene = 'game';
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∑–¥–æ—Ä–æ–≤—å–µ
                updateHealth(100);
            });
            
            // –ö–Ω–æ–ø–∫–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
            document.querySelectorAll('.skill-button').forEach(button => {
                button.addEventListener('click', function() {
                    if (this.classList.contains('cooldown')) return;
                    
                    const skill = this.dataset.skill;
                    useSkill(skill, this);
                });
            });
            
            // –ö–Ω–æ–ø–∫–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ –±–æ—è
            document.getElementById('next-fight').addEventListener('click', function() {
                document.getElementById('victory-screen').style.display = 'none';
                document.getElementById('game-ui').style.display = 'block';
                updateHealth(100);
            });
            
            // –ö–Ω–æ–ø–∫–∞ —Ä–µ–≤–∞–Ω—à–∞
            document.getElementById('rematch').addEventListener('click', function() {
                document.getElementById('defeat-screen').style.display = 'none';
                document.getElementById('game-ui').style.display = 'block';
                updateHealth(100);
            });
            
            // –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é
            document.getElementById('back-to-menu').addEventListener('click', function() {
                document.getElementById('defeat-screen').style.display = 'none';
                document.getElementById('main-menu').style.display = 'flex';
                game.scene.scenes[0].sys.canvas.style.display = 'none';
                currentScene = 'menu';
            });
            
            // –û—Å—Ç–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é
            document.getElementById('shop-button').addEventListener('click', function() {
                alert('–ú–∞–≥–∞–∑–∏–Ω —Å–∫–æ—Ä–æ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è!');
            });
            
            document.getElementById('leaderboard-button').addEventListener('click', function() {
                alert('–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...');
            });
            
            document.getElementById('vip-button').addEventListener('click', function() {
                alert('VIP –ø–æ–¥–ø–∏—Å–∫–∞:\n‚Ä¢ +50% –Ω–∞–≥—Ä–∞–¥—ã\n‚Ä¢ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∫—Ä–∏—Å—Ç–∞–ª–ª—ã\n‚Ä¢ –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –≥–µ—Ä–æ–∏\n‚Ä¢ –ë–µ–∑ —Ä–µ–∫–ª–∞–º—ã\n\n–°—Ç–æ–∏–º–æ—Å—Ç—å: 299 Telegram Stars/–º–µ—Å—è—Ü');
            });
            
            document.getElementById('settings-button').addEventListener('click', function() {
                alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏:\n–ì—Ä–æ–º–∫–æ—Å—Ç—å: 80%\n–ö–∞—á–µ—Å—Ç–≤–æ: –í—ã—Å–æ–∫–æ–µ\n–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞');
            });
        }
        
        function useSkill(skill, button) {
            // –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
            const effects = {
                'attack': { damage: 25, color: '#ff5555', text: '‚öîÔ∏è –ê—Ç–∞–∫–∞!' },
                'fireball': { damage: 40, color: '#ffaa00', text: 'üî• –û–≥–Ω–µ–Ω–Ω—ã–π —à–∞—Ä!' },
                'shield': { damage: 0, color: '#00aaff', text: 'üõ°Ô∏è –©–∏—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω' },
                'heal': { damage: -30, color: '#00ff88', text: 'üíñ –ò—Å—Ü–µ–ª–µ–Ω–∏–µ!' },
                'teleport': { damage: 0, color: '#aa00ff', text: '‚ú® –¢–µ–ª–µ–ø–æ—Ä—Ç!' },
                'ultimate': { damage: 80, color: '#ff00ff', text: '‚≠ê –ì–ù–ï–í –¢–ò–¢–ê–ù–ê!' }
            };
            
            const effect = effects[skill];
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç
            showSkillEffect(effect);
            
            // –ù–∞—á–∏–Ω–∞–µ–º –∫—É–ª–¥–∞—É–Ω
            startCooldown(button, skill === 'ultimate' ? 45000 : 5000);
            
            // –ï—Å–ª–∏ —ç—Ç–æ –∞—Ç–∞–∫–∞ - —É–º–µ–Ω—å—à–∞–µ–º –∑–¥–æ—Ä–æ–≤—å–µ –≤—Ä–∞–≥–∞
            if (effect.damage > 0) {
                // –°–∏–º—É–ª—è—Ü–∏—è –±–æ—è - —É–º–µ–Ω—å—à–∞–µ–º –∑–¥–æ—Ä–æ–≤—å–µ –∏–≥—Ä–æ–∫–∞
                const currentHealth = parseInt(document.getElementById('hp-text').textContent.split('/')[0]);
                const newHealth = Math.max(0, currentHealth - 15); // –í—Ä–∞–≥ –∫–æ–Ω—Ç—Ä–∞—Ç–∞–∫—É–µ—Ç
                updateHealth(newHealth);
                
                // –° —à–∞–Ω—Å–æ–º 30% –ø–æ–±–µ–∂–¥–∞–µ–º
                if (Math.random() < 0.3 && skill === 'ultimate') {
                    setTimeout(() => showVictoryScreen(), 1000);
                }
                
                // –° —à–∞–Ω—Å–æ–º 20% –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º
                if (Math.random() < 0.2 && currentHealth < 30) {
                    setTimeout(() => showDefeatScreen(), 1000);
                }
            }
            
            // –ï—Å–ª–∏ –ª–µ—á–µ–Ω–∏–µ - —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∑–¥–æ—Ä–æ–≤—å–µ
            if (skill === 'heal') {
                const currentHealth = parseInt(document.getElementById('hp-text').textContent.split('/')[0]);
                const newHealth = Math.min(100, currentHealth + 30);
                updateHealth(newHealth);
            }
        }
        
        function showSkillEffect(effect) {
            const effectDiv = document.createElement('div');
            effectDiv.style.cssText = `
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 48px;
                color: ${effect.color};
                font-weight: bold;
                text-shadow: 0 0 20px ${effect.color};
                z-index: 100;
                animation: floatUp 1s forwards;
            `;
            
            effectDiv.textContent = effect.text;
            document.getElementById('game-container').appendChild(effectDiv);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è
            let opacity = 1;
            let y = 0;
            const animate = () => {
                opacity -= 0.02;
                y -= 2;
                effectDiv.style.opacity = opacity;
                effectDiv.style.transform = `translate(-50%, ${y}px)`;
                
                if (opacity > 0) {
                    requestAnimationFrame(animate);
                } else {
                    effectDiv.remove();
                }
            };
            animate();
        }
        
        function startCooldown(button, duration) {
            button.classList.add('cooldown');
            const overlay = button.querySelector('.cooldown-overlay');
            overlay.style.display = 'flex';
            
            let timeLeft = duration / 1000;
            overlay.textContent = timeLeft + '—Å';
            
            const interval = setInterval(() => {
                timeLeft -= 1;
                if (timeLeft <= 0) {
                    clearInterval(interval);
                    button.classList.remove('cooldown');
                    overlay.style.display = 'none';
                } else {
                    overlay.textContent = timeLeft + '—Å';
                }
            }, 1000);
        }
        
        function updateHealth(health) {
            const healthFill = document.getElementById('player-health');
            const hpText = document.getElementById('hp-text');
            
            healthFill.style.width = health + '%';
            hpText.textContent = health + '/100';
            
            // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–¥–æ—Ä–æ–≤—å—è
            if (health < 30) {
                healthFill.style.background = 'linear-gradient(90deg, #ff0000, #ff5500)';
            } else if (health < 60) {
                healthFill.style.background = 'linear-gradient(90deg, #ff5500, #ffff00)';
            } else {
                healthFill.style.background = 'linear-gradient(90deg, #ff0000, #ffff00, #00ff00)';
            }
            
            // –ï—Å–ª–∏ –∑–¥–æ—Ä–æ–≤—å–µ –Ω–∞ –Ω—É–ª–µ - –ø–æ—Ä–∞–∂–µ–Ω–∏–µ
            if (health <= 0) {
                setTimeout(() => showDefeatScreen(), 500);
            }
        }
        
        function showVictoryScreen() {
            document.getElementById('game-ui').style.display = 'none';
            document.getElementById('victory-screen').style.display = 'flex';
        }
        
        function showDefeatScreen() {
            document.getElementById('game-ui').style.display = 'none';
            document.getElementById('defeat-screen').style.display = 'flex';
        }
        
        function updateOnlineCount() {
            // –°–∏–º—É–ª—è—Ü–∏—è –æ–Ω–ª–∞–π–Ω –∏–≥—Ä–æ–∫–æ–≤
            setInterval(() => {
                const base = 1247;
                const change = Math.floor(Math.random() * 50) - 25;
                document.getElementById('online-count').textContent = 
                    (base + change).toLocaleString();
            }, 5000);
        }
        
        // –î–æ–±–∞–≤–ª—è–µ–º CSS –∞–Ω–∏–º–∞—Ü–∏—é
        const style = document.createElement('style');
        style.textContent = `
            @keyframes floatUp {
                0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
                50% { transform: translate(-50%, -100%) scale(1.2); opacity: 1; }
                100% { transform: translate(-50%, -150%) scale(1); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
